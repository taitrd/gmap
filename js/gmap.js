(()=>{"use strict";(()=>{const e=(e,t)=>{const{IconType:n}=t;return{getFeatureOptions:function(e,t){var a=t||{},r=e.getGeometry().getType(),i=e.getProperty("iconType"),o=e.getProperty("color"),s=e.getProperty("visible");if("Polygon"==r)return Object.assign(this.shapeOptions,{editable:!1,draggable:!1},t);if("Point"==r&&i===n.Arrow){var l=e.getProperty("rotation"),c=JSON.parse(JSON.stringify(this.arrowOptions));return c.icon.strokeColor=this.arrowOptions.icon.strokeColor,c.icon.strokeWeight=this.arrowOptions.icon.strokeWeight,c.draggable=!1,l&&(c.icon.rotation=Number(l)),o&&(c.icon.fillColor=o),void 0!==s&&(c.visible=s),void 0!==a.icon&&(c.icon=Object.assign(c.icon,a.icon)),c}return Object.assign(this.markerOptions,{visible:s},t)},getSelectedFeatureOptions:function(e){var t=e.getGeometry().getType(),a=e.getProperty("iconType");if("Polygon"==t)return Object.assign(this.shapeOptions,{editable:!0});if("Point"==t&&a==n.Arrow){var r=e.getProperty("rotation"),i=JSON.parse(JSON.stringify(this.arrowOptions));return i.draggable=!0,i.icon.strokeColor="green",i.icon.strokeWeight=2,r&&(i.icon.rotation=r),i}return Object.assign(this.markerOptions,{icon:"/images/google-map/green-dot.png"})}}},t=(e,t)=>{const{DrawingType:n,IconType:a}=t;return{createArrowMarker:function(t){var r=new e.maps.Marker({...this.arrowOptions,position:t});return r.type=n.Marker,r.iconType=a.Arrow,{instance:r,type:n.Marker,iconType:a.Arrow}},setArrowMarker:function(e,t){var n=t||{};e.setIcon({...e.icon,rotation:e.rotation||this.arrowOptions.icon.rotation,...n})},resetArrowIconMarker:function(e){e.setDraggable(!1),this.setArrowMarker(e,{strokeColor:"orange",strokeWeight:1})},highlightArrowMarker:function(e){e.setDraggable(!0),this.setArrowMarker(e,{strokeColor:"green",strokeWeight:2})},fillColorArrowMarker:function(e,t){this.setArrowMarker(e,{fillColor:t})},rotateArrowMarker:function(e,t){if(e.iconType===a.Arrow){var n=e.rotation||this.arrowOptions.icon.rotation;n+=t,e.rotation=n,this.setArrowMarker(e,{strokeColor:"green",strokeWeight:2,rotation:e.rotation})}},getRotateArrowFeatureOptions:function(e,t){var n=this.getSelectedFeatureOptions(e),a=Number(e.getProperty("rotation"));return(void 0===a||isNaN(a))&&(a=this.arrowOptions.icon.rotation),(a+=t)>=0&&a<=360?(n.icon.rotation=a,e.setProperty("rotation",a)):n.icon.rotation=0,n},getFillColorArrowFeatureOptions:function(e,t){var n=this.getSelectedFeatureOptions(e);return t&&(n.icon.fillColor=t,e.setProperty("color",t)),n}}},n=e=>({createPolygon:function(t,n){var a,r,i=Object.assign({},this.shapeOptions),o=Object.assign({computeArea:!1},n);for(a in t)t.hasOwnProperty(a)&&(i[a]=t[a]);var s=new e.maps.Polygon(i);return o.computeArea&&(r=self.getLengthAndArea(s.getPaths())),{instance:s,area:r}},getPolyCenter:function(t){var n,a=new e.maps.LatLngBounds,r=!1,i=t.getPath().getArray();if(i.length>0){for(n=0;n<i.length;n++)a.extend(i[n]);r=a.getCenter()}return r},getLengthAndArea:function(t){var n=0,a=0;return t.length>2&&(n=e.maps.geometry.spherical.computeArea(t),a=e.maps.geometry.spherical.computeLength(t)),{number:n,m2:n.toFixed(2),km2:(n/1e3).toFixed(2),ha:(n/1e3/10).toFixed(2),length:a}}});var a=function(a){if(void 0===a)throw new Error("Google library is not defined.");var r={Arrow:"Arrow"},i={Marker:"marker",Polygon:"polygon"},o={DrawingType:i,IconType:r};function s(e,t){this.element=document.querySelector(e),this.options=Object.assign({},this.element?this.element.dataset:{},t),this.init()}var l=t(a,o),c=n(a),d=e(0,o),p={uuidv4:function(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(e=>(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)))}},h={addListener:function(e,t,n){a.maps.event.addListener(e,t,n)},addDomListener:function(e,t,n){a.maps.event.addDomListener(e,t,n)},addListenerOnce:function(e,t,n){a.maps.event.addListenerOnce(e,t,n)}};return s.prototype={init:function(){this.shapeOptions={path:[],strokeColor:"#880000",fillColor:"#fc7474",fillOpacity:.1,strokeOpacity:.8,strokeWeight:2,editable:!1,draggable:!1,clickable:!0},this.arrowOptions={icon:{path:a.maps.SymbolPath.FORWARD_CLOSED_ARROW,fillColor:"orange",fillOpacity:.8,scale:8,strokeColor:"orange",strokeWeight:1,rotation:45},draggable:!1,clickable:!0,zIndex:18},this.markerOptions={icon:"/images/google-map/red-dot.png",draggable:!0,editable:!0},this.circleOptions={fillColor:"#ffff00",fillOpacity:1,strokeWeight:5,clickable:!1,editable:!1,zIndex:1},this.drawingToolOptions=Object.assign({drawingControlOptions:{position:a.maps.ControlPosition.TOP_CENTER,drawingModes:[a.maps.drawing.OverlayType.POLYGON,a.maps.drawing.OverlayType.MARKER]}},{}),this.OverlayType=a.maps.drawing.OverlayType,this.ControlPosition=a.maps.ControlPosition,this.IconType=r,this.DrawingType=i,this.createElements(),this.handleEvents()},createElements:function(){},handleEvents:function(){},createDrawingManager:function(e){var t=Object.assign({drawingMode:null,drawingControl:!0,drawingControlOptions:{position:a.maps.ControlPosition.TOP_CENTER,drawingModes:[a.maps.drawing.OverlayType.MARKER,a.maps.drawing.OverlayType.CIRCLE,a.maps.drawing.OverlayType.POLYGON,a.maps.drawing.OverlayType.POLYLINE,a.maps.drawing.OverlayType.RECTANGLE]},markerOptions:Object.assign(this.markerOptions,{}),polygonOptions:Object.assign(this.shapeOptions,{}),circleOptions:Object.assign(this.circleOptions,{})},e);return new a.maps.drawing.DrawingManager(t)},createLatLngBounds:function(e){for(var t=new a.maps.LatLngBounds,n=0;n<e.length;n++){var r=new a.maps.LatLng(e[n].lat,e[n].lng);t.extend(r)}return t},createLatLng:function(e,t){return new a.maps.LatLng(e,t)},center:function(e){var t=e.getCenter();e.panTo(t)},...c,...l,...d,...h,...p},new s(this,{google:a})},r=a(google);window.gmap=r,window.GmapLibBuilder=a})(),(()=>{const e=()=>({runEvent:function(e,t){var n=this.behaviors.find((t=>t.name==e));if(n){if("function"==typeof n.event)return n.event(t);console.warn("Please define more type")}else console.warn(`Not found event ${e}`)},hasEvent:function(e){return this.behaviors.findIndex((t=>t.name==e))>-1},attachEvent:function(e,t){var n=this.behaviors.findIndex((t=>t.name==e));n>-1?this.behaviors[n].event=t:this.behaviors.push({name:e,event:t})}}),t=e=>({handlePolygon:function(t){const n=t.instance.getPath().getArray().map((e=>({lat:e.lat(),lng:e.lng()})));var a=t.instance.getPath(),r=e.getLengthAndArea(a),i=e.getPolyCenter(t.instance);return i&&this.map.panTo(i),{id:t.id,polygon:t,coords:n,area:r}},handlePolyline:function(e){console.log("polyline",e)},handleRectangle:function(e){console.log("rectangle",e)},handleCircle:function(e){console.log("circle",e)},handleMarker:function(e){return this.map.panTo(e.instance.position),{marker:e,position:{lat:e.instance.getPosition().lat(),lng:e.instance.getPosition().lng()}}}}),n=(e,t)=>{const{IconType:n}=e;return{validateGeoJson:function(e){var t="";return e.type||(t+="Missing type field."),e.features?e.features.forEach((function(e,n){n.properties?.id&&(t+=`Missing property id at ${e}.`)})):t+="Missing type features fields.",t},loadGeoJson:function(e,t){var n=this.validateGeoJson(e);n?alert(`Invalid json. ${n} Please try it again.`):this.map&&(this.mapData=e,t&&this.drawGeoJson())},removeDrawGeoItem:function(e){var t=e.getProperty("id");this.drawItems=this.drawItems.filter((e=>e.id!=t)),this.onChangeDrawItems()},handleGeoJson:function(t){var n=t.getGeometry().getType(),a=t.getProperty("iconType"),r=t.getProperty("id");switch(n){case"Polygon":var i=t.getGeometry().getAt(0).getArray(),o=e.createPolygon({paths:i});this.addDrawItem({id:r,layer:o,feature:t,type:n});break;case"Point":if(a===e.IconType.Arrow){var s=t.getGeometry().get(),l=e.createArrowMarker(s);l.iconType=a,this.addDrawItem({id:r,layer:l,feature:t,type:n})}}},drawGeoJson:function(){var t=this;this.map.data.addGeoJson(this.mapData),this.map.data.setStyle((n=>(t.handleGeoJson(n),e.getFeatureOptions(n)))),this.map.data.addListener("click",(function(e){t.setGeoDataSelection(e)}))},setGeoDataSelection:function(t){if(this.options.enableSelection){this.clearSelection();var n=t.feature.getProperty("id");this.map.data.setStyle((t=>{var a=t.getProperty("id");return n==a?e.getSelectedFeatureOptions(t):e.getFeatureOptions(t)})),this.selectedFeature=t.feature,this.handleSelectedFeature(t.feature),this.setEditMode(!0)}},setGeoOption:function(t,a){"visibleArrows"===t?this.map.data.setStyle((t=>{var r=t.getGeometry().getType(),i=t.getProperty("iconType");return"Point"==r&&i===n.Arrow&&t.setProperty("visible",a),e.getFeatureOptions(t)})):console.warn(`Invalid option ${t}`)},handleSelectedFeature:function(n){var a=n.getProperty("id"),r=n.getGeometry().getType(),i=n.getProperty("iconType");n.type=r,n.iconType=i,n.id=a,this.runEvent(t.feature_selected,n),this.toggleMarkerEditElements(!1),"Polygon"===r?this.runEvent(t.polygon_selected,this.createFeatureToPolygon(n)):"Point"==r&&(this.toggleMarkerEditElements(!0),i==e.IconType.Arrow&&this.runEvent(t.marker_selected,this.createFeatureToMarker(n)))},createFeatureToMapInstance:function(e){switch(e.getGeometry().getType()){case"Polygon":return this.createFeatureToPolygon(e);case"Point":return this.createFeatureToMarker(e)}return null},createFeatureToPolygon:function(t){var n=t.getProperty("id"),a=t.getGeometry().getType(),r=t.getProperty("data");if("Polygon"===a){var i=t.getGeometry().getAt(0).getArray(),o=e.createPolygon({paths:i});return o.feature=t,o.id=n,o.data=r,this.handlePolygon(o)}return null},createFeatureToMarker:function(t){var n=t.getProperty("id"),a=t.getGeometry().getType(),r=t.getProperty("iconType"),i=t.getProperty("rotation"),o=t.getProperty("color"),s=t.getProperty("data");if("Point"==a&&r==e.IconType.Arrow){var l=t.getGeometry().get(),c=e.createArrowMarker(l);return c.feature=t,c.id=n,c.data=s,c.rotation=i,c.color=o,this.handleMarker(c)}return null},rotateArrowFeature:function(t,n){var a=t.getProperty("id");this.map.data.setStyle((t=>{var r=t.getProperty("id");return a==r?e.getRotateArrowFeatureOptions(t,n):e.getFeatureOptions(t)}))},rotateSelectedMarker:function(t){this.selectedShape&&this.selectedShape.type==e.DrawingType.Marker&&e.rotateArrowMarker(this.selectedShape,t),this.selectedFeature&&"Point"==this.selectedFeature.type&&this.rotateArrowFeature(this.selectedFeature,t)},fillColorArrowFeature:function(t,n){var a=t.getProperty("id");this.map.data.setStyle((t=>{var r=t.getProperty("id");return a==r?e.getFillColorArrowFeatureOptions(t,n):e.getFeatureOptions(t)}))},fillColorSelectedMarker:function(t){this.selectedShape&&this.selectedShape.type==e.DrawingType.Marker&&e.fillColorArrowMarker(this.selectedShape,t),this.selectedFeature&&"Point"==this.selectedFeature.type&&this.fillColorArrowFeature(this.selectedFeature,t)}}},a=(e,t)=>({handleDrawingToolEvents:function(){var n=this;e.addListener(this.drawingTool,"overlaycomplete",(function(a){n.drawingTool.setDrawingMode(null);var r=a.overlay;switch(r.type=a.type,r.id=e.uuidv4(),r.isNew=!0,r.overlayCompleted=!0,a.type){case"polygon":var i=n.createShapeToPolygon(r);n.addDrawItem({id:r.id,layer:{instance:r},feature:null,type:r.type,polygon:i}),n.runEvent(t.polygon_completed,i);break;case"polyline":n.handlePolyline(a);break;case"rectangle":case"circle":n.handleRectangle(a);break;case"marker":var o=n.createShapeToMarker(r);n.addDrawItem({id:r.id,layer:{instance:r},feature:null,type:r.type,marker:o}),n.runEvent(t.marker_completed,o)}e.addListener(r,"click",(function(){n.setSelection(r)})),n.setSelection(r)})),e.addListener(this.drawingTool,"drawingmode_changed",this.clearSelection.bind(this)),this.map?e.addListener(this.map,"click",this.clearSelection.bind(this)):console.warn("Cannot find map instance")},addDrawItem:function(e){var{id:t,layer:n,feature:a,type:r}=e;this.drawItems.push({id:t,layer:n,feature:a,type:r}),this.onChangeDrawItems()},removeDrawItem:function(e){this.drawItems=this.drawItems.filter((t=>t.id!=e.id)),this.onChangeDrawItems()},onChangeDrawItems:function(){this.runEvent(t.draw_items_changed,{drawItems:this.drawItems})},createShapeToMarker:function(t){const n=t.type,a=t.iconType,r=t.id,i=t.icon.rotation,o=t.icon.fillColor,s=t.isNew;var l=t.position;if("marker"===n&&a===e.IconType.Arrow){var c=e.createArrowMarker(l);return c.id=r,c.rotation=i,c.color=o,c.isNew=s,this.handleMarker(c)}return null},createShapeToPolygon:function(e){const t=e.type,n=e.id,a=e.fillColor,r=e.isNew,i={instance:e};return i.type=t,i.id=n,i.color=a,i.isNew=r,this.handlePolygon(i)},createShapeToMapInstance:function(e){switch(e.type){case"polygon":return this.createShapeToPolygon(e);case"marker":return this.createShapeToMarker(e)}return null},handleRemoveItemEvent:function(e){var n=this;const a=this.hasEvent(t.on_delete_item),r=this.runEvent(t.on_delete_item,e);a?r instanceof Promise?r.then((e=>{e?n.deleteSelectedShape():console.warn("on_delete_item failed.")})):r?n.deleteSelectedShape():console.warn("on_delete_item failed."):n.deleteSelectedShape()},handleCreateItemEvent:function(e){var n=this;const a=this.hasEvent(t.on_save_selection),r=this.runEvent(t.on_save_selection,e);a&&(r instanceof Promise?r.then((e=>{e?console.log("create item res",e):(n.deleteSelectedShape(),console.warn("on_create_item failed."))})):r?console.log("create item",r):(n.deleteSelectedShape(),console.warn("on_create_item failed.")))}});var r=function(r,i){if(void 0===r)throw new Error("App google js is not defined.");function o(e,t){this.element=document.querySelector(e),this.options=Object.assign({visible:!0,drawingToolOptions:r.drawingToolOptions,enableSelection:!0,drawingButtons:[]},this.element?this.element.dataset:{},t);var n=this.options.drawingButtons.map((e=>e.mode)).filter((e=>e&&r.OverlayType[e]));n.length>0&&(this.options.drawingToolOptions.drawingControlOptions.drawingModes=n.map((e=>r.OverlayType[e]))),this.init()}const s={feature_selected:"feature_selected",shape_selected:"shape_selected",polygon_selected:"polygon_selected",marker_selected:"marker_selected",polygon_completed:"polygon_completed",arrow_completed:"arrow_completed",marker_completed:"marker_completed",draw_items_changed:"draw_items_changed",on_delete_item:"on_delete_item",on_save_selection:"on_save_selection"};var l=n(r,s),c=e(),d=t(r),p=a(r,s);o.prototype={init:function(){this.drawingTool=r.createDrawingManager(this.options.drawingToolOptions),this.map=null,this.initDefaultData()},initDefaultData:function(){this.log=!0,this.mapData=null,this.controlsElement=null,this.drawingToolElement=null,this.buttons=[],this.selectedShape=null,this.selectedFeature=null,this.behaviors=[],this.editMode=!1,this.drawItems=[],this.buttonOptions=[{name:"stopDrawing",title:"Stop drawing"},{name:"drawAShape",title:"Draw a shape"},{name:"addAMarker",title:"Add a marker"},{name:"drawAnArrow",title:"Draw an arrow",classList:["btn","btn-secondary"],iconClassList:"fa-solid fa-location-arrow"},{name:"cancelSelection",_title:"Cancel selection",classList:["btn","btn-secondary"],iconClassList:"fa-solid fa-ban"},{name:"removeItem",_title:"Remove item",classList:["btn","btn-secondary"],iconClassList:"fa-solid fa-close"},{name:"rotateMarkerLeft",_title:"Rotate marker left",classList:["btn","btn-secondary","markerEdit"],iconClassList:"fa-solid fa-undo"},{name:"rotateMarkerRight",_title:"Rotate marker right",classList:["btn","btn-secondary","markerEdit"],iconClassList:"fa-solid fa-rotate-right"},{name:"markerColorPicker",_title:"Pick marker color",classList:["btn","btn-secondary","markerEdit"],iconClassList:"fa-solid fa-droplet",tag:"label"},{name:"saveChanges",_title:"Save changes",classList:["btn","btn-secondary"],iconClassList:"fa-solid fa-check"}]},createElements:function(){var e=this.handleControlEvents(),t=document.createElement("div");t.classList.add("gmap-controls");var n=document.createElement("div");n.classList.add("gmap-extra-drawing-controls","btn-group");var a=document.createElement("div");for(var i of(a.classList.add("gmap-edit-controls","btn-group"),this.buttonOptions)){var o=e[i.name],s=document.querySelector(i.title?`button[title="${i.title}"]`:`button[id="${i.name}"]`),l=i.label;if(s)s.classList.add(i.name),this.drawingToolElement||(this.drawingToolElement=s.parentElement.parentElement),o&&o.click&&c.addEventListener("click",o.click.bind(this)),l&&s.setAttribute("aria-label",l),this.buttons.push({name:i.name,element:s});else if(i.classList){var c=document.createElement(i.tag||"button");switch(c.title=i.title||i._title,c.classList.add(...i.classList),c.innerHTML=`<i class='${i.iconClassList}'></i> ${i.title||""}`,i.name){case"saveChanges":case"removeItem":case"cancelSelection":case"rotateMarkerLeft":case"rotateMarkerRight":a.append(c);break;case"markerColorPicker":var d=document.createElement("input");d.type="color",d.id=c.htmlFor="markerColorPicker",c.appendChild(d),a.append(c);break;case"drawAnArrow":n.append(c)}o&&(o.click&&c.addEventListener("click",o.click.bind(this)),o.change&&c.addEventListener("change",o.change.bind(this)),o.input&&c.addEventListener("input",o.input.bind(this))),l&&c.setAttribute("aria-label",l),this.buttons.push({name:i.name,element:c})}}this.drawingToolElement&&this.drawingToolElement.classList.add("gmap-drawing-controls"),this.controlsElement||(t.append(n),t.append(a),this.controlsElement=t,this.map.controls[r.ControlPosition.TOP_CENTER].push(t)),this.element&&!this.element.classList.contains("loaded")?this.element.classList.add("loaded"):console.warn("Not found .gmap-drawer element")},handleOptions:function(){var e=this.options.drawingButtons||[],t=e.map((e=>e.name));this.buttonOptions=this.buttonOptions.filter((e=>!["drawAShape","drawAnArrow","addAMarker"].includes(e.name)||t.includes(e.name))).map((t=>{const n=e.find((e=>e.name===t.name));return n?{...t,label:n.label}:t})),this.setVisible(this.options.visible)},setVisible:function(e){e?this.element.classList.remove("invisible-controls"):this.element.classList.add("invisible-controls"),this.map.panTo(this.map.getCenter())},handleEnableSelection:function(){this.options.enableSelection||this.clearSelection()},setOptions:function(e){this.options=Object.assign(this.options,e)},setOption:function(e,t){switch(e){case"enableSelection":this.options[e]=Boolean(t),this.handleEnableSelection();break;case"visible":this.options[e]=Boolean(t),this.setVisible(this.options[e]);break;default:console.warn(`Invalid option ${e}`)}},setEditMode:function(e){this.editMode=e,e?this.element.classList.add("editMode"):this.element.classList.remove("editMode")},clearMap:function(){var e=this;this.drawingTool.setMap(null),this.map.data.forEach((function(t){e.map.data.remove(t)})),this.element.classList.remove("loaded"),this.initDefaultData()},saveSelection:function(){var e=this;this.selectedShape&&this.drawItems.forEach((function(t){t.id===e.selectedShape.id&&(t.layer.instance=e.selectedShape,e.handleCreateItemEvent(e.createShapeToMapInstance(e.selectedShape)))})),this.selectedFeature&&this.map.data&&this.drawItems.forEach((function(t){t.id===e.selectedFeature.getProperty("id")&&(t.feature=e.selectedFeature,e.runEvent(s.on_save_selection,e.createFeatureToMapInstance(e.selectedFeature)))})),this.onChangeDrawItems()},clearSelection:function(){this.selectedShape&&(this.selectedShape.setEditable&&this.selectedShape.setEditable(!1),this.resetSelection(),this.selectedShape=null),this.selectedFeature&&this.map.data&&(this.map.data.setStyle((function(e){return r.getFeatureOptions(e)})),this.selectedFeature=null),this.setEditMode(!1),r.center(this.map)},removeSelection:function(){this.selectedShape&&this.handleRemoveItemEvent(null),this.selectedFeature&&this.map.data&&this.handleRemoveItemEvent(this.selectedFeature.id)},deleteSelectedShape:function(){this.selectedShape?(this.removeDrawItem(this.selectedShape),this.selectedShape.setMap(null)):this.selectedFeature&&(this.map.data.remove(this.selectedFeature),this.removeDrawGeoItem(this.selectedFeature)),this.clearSelection()},setSelection:function(e){this.options.enableSelection&&(this.clearSelection(),this.selectedShape=e,e.setEditable&&e.setEditable(!0),this.handleSelectedShape(e),this.setEditMode(!0))},resetSelection:function(){this.drawItems.forEach((function(e){e.type===r.DrawingType.Marker&&e.layer.iconType==r.IconType.Arrow&&r.resetArrowIconMarker(e.layer.instance)}))},initializeDrawingManager:function(){var e=this;this.drawingTool.setMap(this.map),setTimeout((()=>{e.handleOptions(),e.createElements(),r.center(e.map)}),100),this.handleDrawingToolEvents()},toggleMarkerEditElements:function(e){var t=document.querySelectorAll(".gmap-edit-controls .markerEdit");e?t.forEach((e=>e.classList.add("show"))):t.forEach((e=>e.classList.remove("show")))},handleSelectedShape:function(e){switch(this.runEvent(s.shape_selected,e),this.toggleMarkerEditElements(!1),e.type){case r.DrawingType.Polygon:this.runEvent(s.polygon_selected,this.handlePolygon({instance:e}));break;case r.DrawingType.Marker:this.toggleMarkerEditElements(!0),e.iconType===r.IconType.Arrow&&r.highlightArrowMarker(e),this.runEvent(s.marker_selected,this.handleMarker({instance:e}))}},setMap:function(e){this.map=e},handleControlEvents(){var e=this;return{drawAnArrow:{click:function(t){t.preventDefault();var n=r.createArrowMarker(e.map.getCenter());n.instance.isNew=!0,n.instance.setMap(e.map),n.instance.id=r.uuidv4(),e.addDrawItem({id:n.instance.id,layer:n,feature:null,type:n.type,arrow:n}),e.runEvent(s.arrow_completed,n),r.addListener(n.instance,"click",(function(){e.setSelection(n.instance)})),e.setSelection(n.instance)}},removeItem:{click:function(){e.removeSelection()}},cancelSelection:{click:function(){e.clearSelection()}},saveChanges:{click:function(){e.saveSelection(),e.clearSelection()}},rotateMarkerLeft:{click:function(){e.rotateSelectedMarker(-15)}},rotateMarkerRight:{click:function(){e.rotateSelectedMarker(15)}},markerColorPicker:{change:function(e){},input:function(t){const n=t.target.value;e.fillColorSelectedMarker(n)}}}},addControls:function(e){this.map.controls[r.ControlPosition.TOP_CENTER].push(e)},...p,...l,...c,...d};const h=new o("div.gmap-drawer",i);return{addControls:e=>h.addControls(e),attachEvent:(e,t)=>h.attachEvent(e,t),listenEvent:(e,t)=>h.attachEvent(e,t),clearMap:()=>h.clearMap(),clearSelection:()=>h.clearSelection(),deleteSelectedShape:()=>h.deleteSelectedShape(),rotateSelectedMarker:e=>h.rotateSelectedMarker(e),loadGeoJson:(e,t)=>h.loadGeoJson(e,t),initialize:()=>h.initializeDrawingManager(),setMap:e=>h.setMap(e),setEditMode:e=>h.setEditMode(e),setOption:(e,t)=>h.setOption(e,t),setGeoOption:(e,t)=>h.setGeoOption(e,t)}}(gmap,"undefined"!=typeof gmapDrawerOptions?gmapDrawerOptions:{});window.gmapDrawer=r})()})();